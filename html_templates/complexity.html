{% extends "base.html" %}

{% set current_page = "complexity" %}

{% block title %}Big O Complexity Analysis{% endblock %}
{% block page_title %}üîç Big O Complexity Analysis{% endblock %}
{% block breadcrumb_title %}Complexity Analysis{% endblock %}

{% block toc %}
<li class="md-nav__item"><a href="#overview" class="md-nav__link">Overview</a></li>
<li class="md-nav__item"><a href="#critical-attention" class="md-nav__link">Critical Attention Needed</a></li>
<li class="md-nav__item"><a href="#time-complexity" class="md-nav__link">Time Complexity Analysis</a></li>
<li class="md-nav__item"><a href="#space-complexity" class="md-nav__link">Space Complexity Analysis</a></li>
<li class="md-nav__item"><a href="#modules-by-attention" class="md-nav__link">Modules by Attention</a></li>
<li class="md-nav__item"><a href="#optimization-guide" class="md-nav__link">Optimization Guide</a></li>
{% endblock %}

{% block extra_css %}
<style>
/* Big O Complexity Analysis Styles */
.complexity-hero {
    background: linear-gradient(135deg, var(--color-primary) 0%, #4a5bb5 100%);
    color: white;
    padding: 2rem;
    border-radius: 0.75rem;
    margin-bottom: 2rem;
    box-shadow: var(--shadow-lg);
}

.complexity-stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-top: 1.5rem;
}

.complexity-stat-card {
    background: rgba(255,255,255,0.1);
    padding: 1.5rem;
    border-radius: 0.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.complexity-stat-card.critical { border-left: 4px solid #ff4444; }
.complexity-stat-card.warning { border-left: 4px solid #ff9500; }
.complexity-stat-card.good { border-left: 4px solid #00cc66; }
.complexity-stat-card.info { border-left: 4px solid #0099ff; }

.stat-icon { font-size: 2rem; }
.stat-content .stat-number { display: block; font-size: 2rem; font-weight: 700; }
.stat-content .stat-label { display: block; font-size: 1rem; opacity: 0.9; }
.stat-content .stat-sublabel { display: block; font-size: 0.8rem; opacity: 0.7; }

/* Critical Functions */
.critical-functions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 1.5rem;
    margin: 1.5rem 0;
}

.critical-function-card {
    background: var(--color-card-bg);
    border-radius: 0.75rem;
    padding: 1.5rem;
    border-left: 5px solid #ff4444;
    box-shadow: var(--shadow-md);
}

.function-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
}

.function-icon { font-size: 1.5rem; }
.function-info h3 { margin: 0; color: var(--color-heading); }
.function-location { color: var(--color-text-muted); font-size: 0.9rem; margin: 0; }

.complexity-badge.critical-badge {
    background: #ff4444;
    color: white;
    padding: 0.4rem 0.8rem;
    border-radius: 1rem;
    font-size: 0.8rem;
    font-weight: 600;
}

.big-o-analysis {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin: 1rem 0;
}

.big-o-section h4 {
    margin: 0 0 0.5rem 0;
    color: var(--color-heading);
    font-size: 1rem;
}

.big-o-notation {
    font-family: 'Roboto Mono', monospace;
    font-weight: 700;
    padding: 0.3rem 0.6rem;
    border-radius: 0.25rem;
    font-size: 0.9rem;
}

.big-o-notation.critical { background: #ff4444; color: white; }
.big-o-notation.warning { background: #ff9500; color: white; }
.big-o-notation.attention { background: #ffcc00; color: #333; }
.big-o-notation.good { background: #00cc66; color: white; }

.big-o-description {
    display: block;
    font-size: 0.8rem;
    color: var(--color-text-muted);
    margin-top: 0.25rem;
}

.optimization-list {
    list-style: none;
    padding: 0;
}

.optimization-list li {
    background: var(--color-bg-subtle);
    padding: 0.5rem;
    margin: 0.25rem 0;
    border-radius: 0.25rem;
    font-size: 0.9rem;
}

.priority-badge {
    padding: 0.25rem 0.6rem;
    border-radius: 1rem;
    font-size: 0.8rem;
    font-weight: 600;
}

.priority-badge.critical { background: #ff4444; color: white; }
.priority-badge.high { background: #ff9500; color: white; }
.priority-badge.medium { background: #ffcc00; color: #333; }
.priority-badge.low { background: #00cc66; color: white; }

/* Time/Space Complexity Categories */
.complexity-categories {
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

.complexity-category {
    border-radius: 0.75rem;
    padding: 1.5rem;
    border-left: 5px solid;
}

.complexity-category.critical { 
    background: rgba(255, 68, 68, 0.05);
    border-left-color: #ff4444;
}

.complexity-category.warning { 
    background: rgba(255, 149, 0, 0.05);
    border-left-color: #ff9500;
}

.complexity-category.good { 
    background: rgba(0, 204, 102, 0.05);
    border-left-color: #00cc66;
}

.complexity-category.excellent { 
    background: rgba(0, 153, 255, 0.05);
    border-left-color: #0099ff;
}

.functions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
    margin-top: 1rem;
}

.function-complexity-card {
    background: var(--color-card-bg);
    padding: 1rem;
    border-radius: 0.5rem;
    border-left: 3px solid;
    box-shadow: var(--shadow-sm);
}

.function-complexity-card.critical { border-left-color: #ff4444; }
.function-complexity-card.warning { border-left-color: #ff9500; }
.function-complexity-card.good { border-left-color: #00cc66; }
.function-complexity-card.excellent { border-left-color: #0099ff; }

/* Modules by Attention */
.modules-attention-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 1.5rem;
}

.module-attention-card {
    background: var(--color-card-bg);
    border-radius: 0.75rem;
    padding: 1.5rem;
    border-left: 5px solid;
    box-shadow: var(--shadow-md);
}

.module-attention-card.critical { border-left-color: #ff4444; }
.module-attention-card.high { border-left-color: #ff9500; }
.module-attention-card.medium { border-left-color: #ffcc00; }
.module-attention-card.low { border-left-color: #00cc66; }

.module-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.big-o-estimates {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin: 1rem 0;
}

.big-o-value {
    font-family: 'Roboto Mono', monospace;
    font-weight: 600;
    padding: 0.2rem 0.4rem;
    border-radius: 0.25rem;
    font-size: 0.85rem;
}

.big-o-value.critical { background: #ff4444; color: white; }
.big-o-value.high { background: #ff9500; color: white; }
.big-o-value.medium { background: #ffcc00; color: #333; }
.big-o-value.good { background: #00cc66; color: white; }

.optimization-recommendations {
    margin-top: 1rem;
}

.recommendation {
    background: var(--color-bg-subtle);
    padding: 0.4rem 0.8rem;
    margin: 0.25rem 0;
    border-radius: 0.25rem;
    font-size: 0.85rem;
}

/* Optimization Guide */
.optimization-strategies-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin: 2rem 0;
}

.strategy-category {
    background: var(--color-card-bg);
    border-radius: 0.75rem;
    padding: 1.5rem;
    box-shadow: var(--shadow-md);
}

.strategies-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.strategy-item {
    display: flex;
    gap: 1rem;
    padding: 1rem;
    background: var(--color-bg-subtle);
    border-radius: 0.5rem;
}

.complexity-change {
    font-family: 'Roboto Mono', monospace;
    background: var(--color-primary-bg);
    color: var(--color-primary);
    padding: 0.2rem 0.4rem;
    border-radius: 0.25rem;
    font-size: 0.8rem;
    margin-top: 0.5rem;
}

.complexity-table {
    display: grid;
    grid-template-columns: 1fr 2fr 3fr 1fr;
    gap: 1px;
    background: var(--color-border);
    border-radius: 0.5rem;
    overflow: hidden;
    margin-top: 1rem;
}

.complexity-row {
    display: contents;
}

.complexity-cell {
    background: var(--color-card-bg);
    padding: 1rem;
    display: flex;
    align-items: center;
}

.complexity-row.header .complexity-cell {
    background: var(--color-bg-subtle);
    font-weight: 600;
}

@media (max-width: 768px) {
    .complexity-stats-grid {
        grid-template-columns: 1fr;
    }
    
    .critical-functions-grid,
    .modules-attention-grid {
        grid-template-columns: 1fr;
    }
    
    .big-o-analysis,
    .big-o-estimates {
        grid-template-columns: 1fr;
    }
    
    .complexity-table {
        grid-template-columns: 1fr;
    }
    
    .complexity-cell {
        padding: 0.5rem;
    }
}
</style>
{% endblock %}

{% block content %}
<h1 id="overview">üîç Big O Complexity Analysis</h1>
<p>Algorithmic complexity analysis identifying time and space complexities across modules, sorted by attention priority.</p>

<!-- Complexity Overview Dashboard -->
<section class="complexity-hero">
    <div class="complexity-hero-content">
        <h2>üìä Complexity Overview</h2>
        <p>Algorithmic performance analysis with Big O notation for time and space complexities</p>
        
        <div class="complexity-stats-grid">
            <div class="complexity-stat-card critical">
                <div class="stat-icon">üö®</div>
                <div class="stat-content">
                    <span class="stat-number">{{ modules_needing_critical_attention | length | default('0') }}</span>
                    <span class="stat-label">Critical Attention</span>
                    <span class="stat-sublabel">O(n¬≤) or worse</span>
                </div>
            </div>
            <div class="complexity-stat-card warning">
                <div class="stat-icon">‚ö†Ô∏è</div>
                <div class="stat-content">
                    <span class="stat-number">{{ modules_needing_attention | length | default('0') }}</span>
                    <span class="stat-label">Needs Attention</span>
                    <span class="stat-sublabel">O(n log n) complexity</span>
                </div>
            </div>
            <div class="complexity-stat-card good">
                <div class="stat-icon">‚úÖ</div>
                <div class="stat-content">
                    <span class="stat-number">{{ optimized_modules | length | default('0') }}</span>
                    <span class="stat-label">Optimized</span>
                    <span class="stat-sublabel">O(1) or O(log n)</span>
                </div>
            </div>
            <div class="complexity-stat-card info">
                <div class="stat-icon">üìà</div>
                <div class="stat-content">
                    <span class="stat-number">{{ total_functions | default('N/A') }}</span>
                    <span class="stat-label">Total Functions</span>
                    <span class="stat-sublabel">Analyzed</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Critical Attention Needed -->
<section class="critical-attention-section" id="critical-attention">
    <h2>üö® Critical Attention Needed</h2>
    <p>Functions and modules with exponential or polynomial time/space complexity requiring immediate optimization.</p>
    
    <div class="critical-functions-grid">
        {% if high_complexity_functions %}
            {% for f in high_complexity_functions | sort(attribute='complexity', reverse=true) %}
                {% if f.complexity >= 15 %}
                <div class="critical-function-card">
                    <div class="function-header">
                        <div class="function-icon">üî•</div>
                        <div class="function-info">
                            <h3>{{ f.name }}()</h3>
                            <p class="function-location">{{ f.module }}</p>
                        </div>
                        <div class="complexity-badge critical-badge">
                            Complexity: {{ f.complexity }}
                        </div>
                    </div>
                    
                    <div class="big-o-analysis">
                        <div class="big-o-section">
                            <h4>‚è±Ô∏è Time Complexity</h4>
                            <div class="big-o-estimate">
                                {% if f.complexity >= 25 %}
                                    <span class="big-o-notation critical">O(n¬≥) or O(2‚Åø)</span>
                                    <span class="big-o-description">Exponential/Cubic - Critical Performance Issue</span>
                                {% elif f.complexity >= 20 %}
                                    <span class="big-o-notation warning">O(n¬≤)</span>
                                    <span class="big-o-description">Quadratic - Scales poorly with input size</span>
                                {% else %}
                                    <span class="big-o-notation attention">O(n log n)</span>
                                    <span class="big-o-description">Linearithmic - Acceptable for small datasets</span>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="big-o-section">
                            <h4>üíæ Space Complexity</h4>
                            <div class="big-o-estimate">
                                {% if f.complexity >= 25 %}
                                    <span class="big-o-notation critical">O(n¬≤)</span>
                                    <span class="big-o-description">Quadratic space usage</span>
                                {% elif f.complexity >= 20 %}
                                    <span class="big-o-notation warning">O(n)</span>
                                    <span class="big-o-description">Linear space growth</span>
                                {% else %}
                                    <span class="big-o-notation good">O(log n)</span>
                                    <span class="big-o-description">Logarithmic space usage</span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <div class="optimization-suggestions">
                        <h4>üöÄ Optimization Strategies</h4>
                        <ul class="optimization-list">
                            {% if f.complexity >= 25 %}
                                <li>Consider dynamic programming or memoization</li>
                                <li>Implement iterative solutions instead of recursive</li>
                                <li>Use efficient data structures (hash maps, trees)</li>
                                <li>Break down into smaller, focused functions</li>
                            {% elif f.complexity >= 20 %}
                                <li>Replace nested loops with more efficient algorithms</li>
                                <li>Use binary search for sorted data</li>
                                <li>Implement caching for repeated computations</li>
                            {% else %}
                                <li>Optimize inner loop operations</li>
                                <li>Consider early termination conditions</li>
                                <li>Use appropriate data structures</li>
                            {% endif %}
                        </ul>
                    </div>
                    
                    <div class="function-actions">
                        <span class="priority-badge critical">üî• Critical Priority</span>
                        {% if f.line_number %}
                            <span class="line-info">Line {{ f.line_number }}</span>
                        {% endif %}
                    </div>
                </div>
                {% endif %}
            {% endfor %}
        {% else %}
            <div class="no-critical-issues">
                <div class="success-icon">‚úÖ</div>
                <h3>No Critical Complexity Issues Found</h3>
                <p>All functions appear to have manageable complexity levels.</p>
            </div>
        {% endif %}
    </div>
</section>

<!-- Time Complexity Analysis -->
<section class="time-complexity-section" id="time-complexity">
    <h2>‚è±Ô∏è Time Complexity Analysis</h2>
    <p>Functions categorized by their estimated time complexity using Big O notation.</p>
    
    <div class="complexity-categories">
        <!-- Exponential/Polynomial Complexity -->
        <div class="complexity-category critical">
            <div class="category-header">
                <h3>üö® Exponential/Polynomial Time - O(n¬≤) or worse</h3>
                <p>Functions that may become bottlenecks with larger datasets</p>
            </div>
            <div class="functions-grid">
                {% if high_complexity_functions %}
                    {% for f in high_complexity_functions | sort(attribute='complexity', reverse=true) %}
                        {% if f.complexity >= 20 %}
                        <div class="function-complexity-card critical">
                            <div class="function-name">{{ f.name }}()</div>
                            <div class="function-module">{{ f.module }}</div>
                            <div class="big-o-badge critical">
                                {% if f.complexity >= 25 %}O(n¬≥) or O(2‚Åø){% else %}O(n¬≤){% endif %}
                            </div>
                            <div class="complexity-score">Complexity: {{ f.complexity }}</div>
                            <div class="optimization-urgency critical">üî• Immediate attention needed</div>
                        </div>
                        {% endif %}
                    {% endfor %}
                {% else %}
                    <div class="no-functions">‚úÖ No exponential complexity functions found</div>
                {% endif %}
            </div>
        </div>
        
        <!-- Linearithmic Complexity -->
        <div class="complexity-category warning">
            <div class="category-header">
                <h3>‚ö†Ô∏è Linearithmic Time - O(n log n)</h3>
                <p>Moderately efficient functions that scale reasonably well</p>
            </div>
            <div class="functions-grid">
                {% if high_complexity_functions %}
                    {% for f in high_complexity_functions | sort(attribute='complexity', reverse=true) %}
                        {% if f.complexity >= 10 and f.complexity < 20 %}
                        <div class="function-complexity-card warning">
                            <div class="function-name">{{ f.name }}()</div>
                            <div class="function-module">{{ f.module }}</div>
                            <div class="big-o-badge warning">O(n log n)</div>
                            <div class="complexity-score">Complexity: {{ f.complexity }}</div>
                            <div class="optimization-urgency warning">‚ö†Ô∏è Monitor for large datasets</div>
                        </div>
                        {% endif %}
                    {% endfor %}
                {% else %}
                    <div class="no-functions">‚úÖ No linearithmic complexity functions found</div>
                {% endif %}
            </div>
        </div>
        
        <!-- Linear Complexity -->
        <div class="complexity-category good">
            <div class="category-header">
                <h3>‚úÖ Linear Time - O(n)</h3>
                <p>Efficient functions with linear scaling</p>
            </div>
            <div class="functions-grid">
                {% if modules %}
                    {% for m in modules %}
                        {% for f in m.functions | default([]) %}
                            {% if f.complexity and f.complexity >= 5 and f.complexity < 10 %}
                            <div class="function-complexity-card good">
                                <div class="function-name">{{ f.name }}()</div>
                                <div class="function-module">{{ m.name }}</div>
                                <div class="big-o-badge good">O(n)</div>
                                <div class="complexity-score">Complexity: {{ f.complexity }}</div>
                                <div class="optimization-urgency good">‚úÖ Well optimized</div>
                            </div>
                            {% endif %}
                        {% endfor %}
                    {% endfor %}
                {% else %}
                    <div class="no-functions">üìä Function analysis data not available</div>
                {% endif %}
            </div>
        </div>
        
        <!-- Constant/Logarithmic Complexity -->
        <div class="complexity-category excellent">
            <div class="category-header">
                <h3>üöÄ Constant/Logarithmic Time - O(1) or O(log n)</h3>
                <p>Highly optimized functions with excellent performance</p>
            </div>
            <div class="functions-grid">
                {% if modules %}
                    {% for m in modules %}
                        {% for f in m.functions | default([]) %}
                            {% if f.complexity and f.complexity < 5 %}
                            <div class="function-complexity-card excellent">
                                <div class="function-name">{{ f.name }}()</div>
                                <div class="function-module">{{ m.name }}</div>
                                <div class="big-o-badge excellent">O(1) or O(log n)</div>
                                <div class="complexity-score">Complexity: {{ f.complexity }}</div>
                                <div class="optimization-urgency excellent">üöÄ Excellent performance</div>
                            </div>
                            {% endif %}
                        {% endfor %}
                    {% endfor %}
                {% else %}
                    <div class="no-functions">üìä Function analysis data not available</div>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Space Complexity Analysis -->
<section class="space-complexity-section" id="space-complexity">
    <h2>üíæ Space Complexity Analysis</h2>
    <p>Memory usage patterns and space complexity estimates for functions and data structures.</p>
    
    <div class="space-complexity-grid">
        <div class="space-analysis-card">
            <div class="card-icon">üìà</div>
            <h3>Memory Usage Patterns</h3>
            <div class="space-metrics">
                <div class="space-metric">
                    <span class="metric-label">High Memory Usage:</span>
                    <span class="metric-value">{{ high_memory_functions | length | default('0') }} functions</span>
                    <div class="metric-description">Functions likely using O(n¬≤) or O(n!) space</div>
                </div>
                <div class="space-metric">
                    <span class="metric-label">Moderate Memory:</span>
                    <span class="metric-value">{{ moderate_memory_functions | length | default('0') }} functions</span>
                    <div class="metric-description">Functions using O(n) space complexity</div>
                </div>
                <div class="space-metric">
                    <span class="metric-label">Efficient Memory:</span>
                    <span class="metric-value">{{ efficient_memory_functions | length | default('0') }} functions</span>
                    <div class="metric-description">Functions using O(1) or O(log n) space</div>
                </div>
            </div>
        </div>
        
        <div class="space-analysis-card">
            <div class="card-icon">üîç</div>
            <h3>Space Optimization Opportunities</h3>
            <div class="optimization-opportunities">
                <div class="opportunity-item">
                    <span class="opportunity-icon">üîÑ</span>
                    <div class="opportunity-content">
                        <strong>In-place Algorithms</strong>
                        <p>{{ in_place_opportunities | default('3') }} functions could benefit from in-place operations</p>
                    </div>
                </div>
                <div class="opportunity-item">
                    <span class="opportunity-icon">üíæ</span>
                    <div class="opportunity-content">
                        <strong>Memory Pooling</strong>
                        <p>{{ memory_pool_opportunities | default('2') }} functions could use object pooling</p>
                    </div>
                </div>
                <div class="opportunity-item">
                    <span class="opportunity-icon">üóúÔ∏è</span>
                    <div class="opportunity-content">
                        <strong>Data Structure Optimization</strong>
                        <p>{{ data_structure_opportunities | default('5') }} functions could use more efficient data structures</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="space-analysis-card">
            <div class="card-icon">üìä</div>
            <h3>Memory Allocation Patterns</h3>
            <div class="allocation-patterns">
                <div class="pattern-item">
                    <div class="pattern-bar">
                        <div class="pattern-fill" style="width: 25%"></div>
                    </div>
                    <span class="pattern-label">Stack Allocation (25%)</span>
                </div>
                <div class="pattern-item">
                    <div class="pattern-bar">
                        <div class="pattern-fill" style="width: 60%"></div>
                    </div>
                    <span class="pattern-label">Heap Allocation (60%)</span>
                </div>
                <div class="pattern-item">
                    <div class="pattern-bar">
                        <div class="pattern-fill" style="width: 15%"></div>
                    </div>
                    <span class="pattern-label">Static Allocation (15%)</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Modules Sorted by Attention Needed -->
<section class="modules-by-attention-section" id="modules-by-attention">
    <h2>üì¶ Modules Sorted by Attention Priority</h2>
    <p>All modules ranked by complexity and optimization urgency, with Big O analysis.</p>
    
    <div class="modules-attention-grid">
        {% if modules %}
            {% set sorted_modules = modules | sort(attribute='complexity', reverse=true) %}
            {% for m in sorted_modules %}
            <div class="module-attention-card {% if m.complexity >= 20 %}critical{% elif m.complexity >= 15 %}high{% elif m.complexity >= 10 %}medium{% else %}low{% endif %}">
                <div class="module-header">
                    <div class="attention-indicator">
                        {% if m.complexity >= 20 %}
                            <span class="priority-badge critical">üö® Critical</span>
                        {% elif m.complexity >= 15 %}
                            <span class="priority-badge high">‚ö†Ô∏è High Priority</span>
                        {% elif m.complexity >= 10 %}
                            <span class="priority-badge medium">‚ö° Medium Priority</span>
                        {% else %}
                            <span class="priority-badge low">‚úÖ Low Priority</span>
                        {% endif %}
                    </div>
                    <h3>{{ m.name }}</h3>
                    <div class="complexity-score-badge">
                        Complexity: {{ m.complexity | default(0) }}
                    </div>
                </div>
                
                <div class="module-big-o-analysis">
                    <div class="big-o-estimates">
                        <div class="time-complexity-estimate">
                            <span class="complexity-label">‚è±Ô∏è Time:</span>
                            {% if m.complexity >= 20 %}
                                <span class="big-o-value critical">O(n¬≤) - O(n¬≥)</span>
                            {% elif m.complexity >= 15 %}
                                <span class="big-o-value high">O(n log n)</span>
                            {% elif m.complexity >= 10 %}
                                <span class="big-o-value medium">O(n)</span>
                            {% else %}
                                <span class="big-o-value good">O(1) - O(log n)</span>
                            {% endif %}
                        </div>
                        <div class="space-complexity-estimate">
                            <span class="complexity-label">üíæ Space:</span>
                            {% if m.complexity >= 20 %}
                                <span class="big-o-value critical">O(n) - O(n¬≤)</span>
                            {% elif m.complexity >= 15 %}
                                <span class="big-o-value high">O(n)</span>
                            {% elif m.complexity >= 10 %}
                                <span class="big-o-value medium">O(log n)</span>
                            {% else %}
                                <span class="big-o-value good">O(1)</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
                
                <div class="module-stats">
                    <div class="stat-item">
                        <span class="stat-label">Functions:</span>
                        <span class="stat-value">{{ m.functions | length | default(0) }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Classes:</span>
                        <span class="stat-value">{{ m.classes | length | default(0) }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Lines:</span>
                        <span class="stat-value">{{ m.lines_of_code | default(0) }}</span>
                    </div>
                </div>
                
                <div class="optimization-recommendations">
                    {% if m.complexity >= 20 %}
                        <div class="recommendation">üî• Immediate refactoring required</div>
                        <div class="recommendation">üìä Consider algorithm redesign</div>
                        <div class="recommendation">üß™ Add comprehensive testing before changes</div>
                    {% elif m.complexity >= 15 %}
                        <div class="recommendation">‚ö†Ô∏è Schedule refactoring soon</div>
                        <div class="recommendation">üîç Profile performance bottlenecks</div>
                        <div class="recommendation">üìà Monitor with larger datasets</div>
                    {% elif m.complexity >= 10 %}
                        <div class="recommendation">üîß Consider minor optimizations</div>
                        <div class="recommendation">üìö Add documentation for complex parts</div>
                    {% else %}
                        <div class="recommendation">‚úÖ Well-optimized module</div>
                        <div class="recommendation">üöÄ Good performance characteristics</div>
                    {% endif %}
                </div>
                
                {% if m.path %}
                <div class="module-path">
                    <code>{{ m.path }}</code>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        {% else %}
            <div class="no-modules">
                <div class="no-content-icon">üìä</div>
                <h3>No Module Data Available</h3>
                <p>Module analysis data is not available. Run code analysis to see module complexity metrics.</p>
            </div>
        {% endif %}
    </div>
</section>

<!-- Optimization Guide -->
<section class="optimization-guide-section" id="optimization-guide">
    <h2>üöÄ Big O Optimization Guide</h2>
    <p>Comprehensive guide for optimizing time and space complexity across different scenarios.</p>
    
    <div class="optimization-strategies-grid">
        <div class="strategy-category">
            <div class="category-header">
                <h3>üî• Critical Optimizations (O(n¬≤) ‚Üí O(n log n))</h3>
                <p>High-impact optimizations for exponential/polynomial functions</p>
            </div>
            <div class="strategies-list">
                <div class="strategy-item">
                    <div class="strategy-icon">üîç</div>
                    <div class="strategy-content">
                        <h4>Replace Nested Loops</h4>
                        <p>Use hash maps, sets, or sorting + two pointers instead of nested iterations</p>
                        <div class="complexity-change">O(n¬≤) ‚Üí O(n) or O(n log n)</div>
                    </div>
                </div>
                <div class="strategy-item">
                    <div class="strategy-icon">üß†</div>
                    <div class="strategy-content">
                        <h4>Dynamic Programming</h4>
                        <p>Cache results of expensive recursive computations</p>
                        <div class="complexity-change">O(2‚Åø) ‚Üí O(n¬≤) or O(n)</div>
                    </div>
                </div>
                <div class="strategy-item">
                    <div class="strategy-icon">üå≥</div>
                    <div class="strategy-content">
                        <h4>Tree-Based Data Structures</h4>
                        <p>Use balanced trees, heaps, or tries for efficient lookups</p>
                        <div class="complexity-change">O(n) ‚Üí O(log n)</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="strategy-category">
            <div class="category-header">
                <h3>‚ö° Performance Optimizations (O(n log n) ‚Üí O(n))</h3>
                <p>Medium-impact optimizations for moderately complex functions</p>
            </div>
            <div class="strategies-list">
                <div class="strategy-item">
                    <div class="strategy-icon">üìä</div>
                    <div class="strategy-content">
                        <h4>Linear Algorithms</h4>
                        <p>Replace sorting with counting sort, radix sort, or bucket sort when applicable</p>
                        <div class="complexity-change">O(n log n) ‚Üí O(n)</div>
                    </div>
                </div>
                <div class="strategy-item">
                    <div class="strategy-icon">üíæ</div>
                    <div class="strategy-content">
                        <h4>Preprocessing & Caching</h4>
                        <p>Precompute results or use memoization for repeated queries</p>
                        <div class="complexity-change">O(n log n) ‚Üí O(1) per query</div>
                    </div>
                </div>
                <div class="strategy-item">
                    <div class="strategy-icon">üîÑ</div>
                    <div class="strategy-content">
                        <h4>Streaming Algorithms</h4>
                        <p>Process data in single pass instead of multiple iterations</p>
                        <div class="complexity-change">O(kn) ‚Üí O(n)</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="strategy-category">
            <div class="category-header">
                <h3>üíæ Space Optimizations</h3>
                <p>Reduce memory usage while maintaining time complexity</p>
            </div>
            <div class="strategies-list">
                <div class="strategy-item">
                    <div class="strategy-icon">üóúÔ∏è</div>
                    <div class="strategy-content">
                        <h4>In-Place Algorithms</h4>
                        <p>Modify data structures in place instead of creating copies</p>
                        <div class="complexity-change">O(n) space ‚Üí O(1) space</div>
                    </div>
                </div>
                <div class="strategy-item">
                    <div class="strategy-icon">üîÑ</div>
                    <div class="strategy-content">
                        <h4>Iterative vs Recursive</h4>
                        <p>Replace recursion with iteration to avoid stack overflow</p>
                        <div class="complexity-change">O(n) stack ‚Üí O(1) space</div>
                    </div>
                </div>
                <div class="strategy-item">
                    <div class="strategy-icon">üß©</div>
                    <div class="strategy-content">
                        <h4>Bit Manipulation</h4>
                        <p>Use bitwise operations for compact data representation</p>
                        <div class="complexity-change">O(n) ‚Üí O(n/32) space</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="complexity-reference">
        <h3>üìö Big O Complexity Reference</h3>
        <div class="complexity-table">
            <div class="complexity-row header">
                <div class="complexity-cell">Notation</div>
                <div class="complexity-cell">Name</div>
                <div class="complexity-cell">Example Operations</div>
                <div class="complexity-cell">Performance</div>
            </div>
            <div class="complexity-row excellent">
                <div class="complexity-cell">O(1)</div>
                <div class="complexity-cell">Constant</div>
                <div class="complexity-cell">Hash table lookup, array access</div>
                <div class="complexity-cell">üöÄ Excellent</div>
            </div>
            <div class="complexity-row good">
                <div class="complexity-cell">O(log n)</div>
                <div class="complexity-cell">Logarithmic</div>
                <div class="complexity-cell">Binary search, balanced tree</div>
                <div class="complexity-cell">‚úÖ Good</div>
            </div>
            <div class="complexity-row acceptable">
                <div class="complexity-cell">O(n)</div>
                <div class="complexity-cell">Linear</div>
                <div class="complexity-cell">Array iteration, linear search</div>
                <div class="complexity-cell">‚ö° Acceptable</div>
            </div>
            <div class="complexity-row warning">
                <div class="complexity-cell">O(n log n)</div>
                <div class="complexity-cell">Linearithmic</div>
                <div class="complexity-cell">Merge sort, heap sort</div>
                <div class="complexity-cell">‚ö†Ô∏è Monitor</div>
            </div>
            <div class="complexity-row critical">
                <div class="complexity-cell">O(n¬≤)</div>
                <div class="complexity-cell">Quadratic</div>
                <div class="complexity-cell">Nested loops, bubble sort</div>
                <div class="complexity-cell">üö® Critical</div>
            </div>
            <div class="complexity-row critical">
                <div class="complexity-cell">O(2‚Åø)</div>
                <div class="complexity-cell">Exponential</div>
                <div class="complexity-cell">Recursive fibonacci, subset generation</div>
                <div class="complexity-cell">üî• Avoid</div>
            </div>
        </div>
    </div>
</section>

<script src="assets/js/mermaid.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function(){
  if (window.mermaid) { 
    mermaid.initialize({ 
      startOnLoad: true,
      theme: 'default',
      flowchart: { useMaxWidth: true },
      graph: { useMaxWidth: true }
    }); 
  }
});
</script>
{% endblock %}